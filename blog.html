<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <iframe allowtransparency="true" frameborder="0" scrolling="0" src="header.html" width="100%" height="150px"></iframe>
    <link rel="stylesheet" href="common.css">
    <main id="root" style="width:1200px;min-height: 500px;margin:auto;font-size:12px;line-height:18px;">
      <div :class="[display?'topshow':'tophide']" style="transition: .5s all;margin-left: 1280px;cursor:pointer;position:fixed;z-index: 11111;opacity:1;color:gray;font-size:50px;" @click="display=false;toTop()">
        <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15187"><path d="M520.355 781.165c45.898 0 83.6 37.703 83.603 83.603 0 45.898-37.703 143.433-83.602 143.433s-83.603-97.536-83.602-143.433c-0.001-45.898 37.295-83.194 83.6-83.603z" fill="#EFC75E" p-id="15188"></path><path d="M440.851 838.535l2.459 2.459c42.621 42.621 112.288 42.621 154.909 0l1.639-1.639c-10.655-33.605-42.21-57.783-79.913-57.783-36.471-0.411-68.028 23.767-79.094 56.962z" fill="#DEB957" p-id="15189"></path><path d="M512.158 531.995c140.154 0 253.671 85.65 253.671 218.429v63.11c0 132.778-113.517-72.534-253.671-72.534s-253.673 206.135-253.673 72.534v-63.11c0.003-132.778 113.52-218.427 253.673-218.429z" fill="#F26C4F" p-id="15190"></path><path d="M512.158 68.091c42.621 0 168.432 144.663 168.842 406.531-0.411 170.071-24.179 253.673-24.179 253.673-18.442 95.486-72.126 96.714-144.254 96.715s-126.22-0.82-144.254-96.715c0 0-23.77-84.422-24.179-254.493 0-261.457 124.994-406.121 168.022-405.71z" fill="#F4F0D3" p-id="15191"></path><path d="M660.919 687.316c-19.671 99.174-75.405 100.813-149.991 100.813-75.405 0-131.139-0.819-149.991-100.813l-3.687-15.982c5.737 37.703 11.065 56.964 11.065 56.964 18.033 95.895 72.126 96.714 144.254 96.715s125.403-1.639 144.254-96.715c0 0 11.063-39.753 18.442-120.074-6.967 52.867-14.346 79.097-14.346 79.097z" fill="#E8E4C8" p-id="15192"></path><path d="M512.158 342.666c40.162 0 72.534 32.375 72.534 72.534 0 40.162-32.375 72.534-72.534 72.534-40.162 0-72.534-32.375-72.534-72.534s32.785-72.948 72.534-72.534z" fill="#8BA0AB" p-id="15193"></path><path d="M520.767 588.141c20.491 0 37.291 56.143 37.291 156.14s-16.801 143.843-37.703 143.433c-20.491 0-37.703-43.44-37.703-143.433 0.411-100.403 16.801-156.14 38.112-156.14z" fill="#F26C4F" p-id="15194"></path><path d="M473.226 375.858c10.245-10.245 24.178-15.984 38.932-15.984s28.688 5.739 38.932 15.984 15.984 24.178 15.984 38.932c0 14.753-5.737 28.688-15.984 38.933s-24.178 15.982-38.932 15.982c-14.753 0-28.688-5.737-38.932-15.982s-15.982-24.178-15.982-38.933c-0.001-14.753 5.739-28.688 15.982-38.932M460.932 363.566c-13.113 13.113-21.311 31.146-20.901 51.225 0 40.162 32.375 72.534 72.534 72.534 19.671 0 38.112-7.786 51.225-20.901s21.311-31.146 20.901-51.225c0-40.162-32.375-72.534-72.534-72.534-20.080-0.411-38.112 7.786-51.225 20.901z" fill="#324D5B" p-id="15195"></path><path d="M397.002 203.737c31.147 23.767 74.995 38.113 123.351 38.113 42.21-0.411 80.733-11.065 110.649-29.507-40.163-94.256-93.847-143.843-118.847-144.255-24.179-0.411-75.403 46.718-115.156 135.649z" fill="#F26C4F" p-id="15196"></path></svg>
      </div>
    </main>
    <!-- <div style="overflow:hidden;">
      <iframe style="margin-top: -380px;" allowtransparency="true" frameborder="0" scrolling="0" src="https://github.com/william807803/william807803.github.io/issues/1" hspace="-100" vspace="-100" width="100%" height="1000px;"></iframe>
    </div> -->
    <div id="comments">

    </div>
    <iframe allowtransparency="true" frameborder="0" scrolling="0" src="footer.html" width="100%" height="100px;"></iframe>
    <script src="zepto.min.js" charset="utf-8"></script>
    <script src="vue.js"></script>
    <script type="text/javascript">
      let params = {};
      location.search.substr(1).split('&').map(ele=>{let pairs=ele.split('=');params[pairs[0]]=pairs[1];});
       async function getHtml(url) {
        let response = await fetch(url);
        let html = await response.text();
        return html;
      }
      getHtml(params.url).then(html=>{
        $('#root').prepend(html)
      })
      getHtml(`https://cors-anywhere.herokuapp.com/https://github.com/william807803/william807803.github.io/issues/${params.commentId}`).then(html=>{
        // document.getElementById("comments").innerHTML=html;
        let $html=$(html);
        $html.find('.discussion-timeline,.container.new-discussion-timeline').css("width","1200px");
        $html.find('header.Header,.signup-prompt-bg,.discussion-timeline-actions,.position-relative.js-header-wrapper,.footer.container-lg.px-3,.pagehead.repohead,#partial-discussion-header,.discussion-sidebar').remove();

        $('#comments').append($html);
        $html.find('.container.new-discussion-timeline').append(`
          <div class="discussion-timeline-actions" style="margin-bottom:20px;">
            <div class="flash flash-warn mt-3">
              <a rel="nofollow" class="btn btn-primary" target="_blank" href="https://github.com/william807803/william807803.github.io/issues/${params.commentId}">朕要去评论，爱卿不要拦朕！跪好了！</a>
                <strong>&nbsp; leave a comment</strong>.
                dont be shy !
              <a rel="nofollow" target="_blank" href="https://github.com/william807803/william807803.github.io/issues/${params.commentId}">click to comment</a>
            </div>
          </div>`
        );
        setTimeout(e=>{
          $('.footer.container-lg.px-3').remove();
          $('.author').forEach(e=>{  $(e).attr({href:'https://github.com/'+$(e).attr('href'),target:'_blank'})  });
        },100)
      });


       new Vue({
         el: '#root',
         data: {
           display:false,
         },
         methods: {
           toTop(){
            //  document.body.scrollTop=0;
             this.scrollTo(document.body,0,500);
           },
           scrollTo (dom,position, timeout) {
            var scrollTop = dom.scrollTop || document.body.scrollTop,
                direction = position - scrollTop > 0 ? 1 : -1,
                distance = Math.abs(position - scrollTop),
                split = distance / 50,
                _timeout;
                // debugger
            if (position !== scrollTop) {
                timeout = timeout || 1000;
                split *= direction;

                _timeout = setInterval(function () {
                    scrollTop += split;
                    distance -= Math.abs(split);
                    if (0 >= distance) {
                        dom.scrollTop= position;
                        clearInterval(_timeout);
                        _timeout = null;
                    } else {
                        dom.scrollTop= scrollTop;
                    }
                }, timeout / 100);
            }
          },
         },
         mounted(){
           let that = this;
           setInterval(e=>{
             let distance = document.body.scrollTop;
             that.display=distance>800?true:false;
           },1000);
         }
       })
    </script>
  </body>
</html>
